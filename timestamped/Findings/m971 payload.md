M971 Command Payload Analysis
This analysis examines the bus traffic generated by the m971_heuristic_gcode.gcode script. The goal was to determine what kind of data can be passed to the unused bus address 0x10 using the M971 command.

Key Findings
The firmware consistently takes the M971 command and its parameters, packages the entire line as an ASCII string, and sends it as the payload of a standard 0x3D packet to address 0x10.

Full String Transmission: The printer does not interpret the S, C, O, or P parameters as individual values. Instead, it transmits the literal string as it appears in the G-code file.

String Support: The firmware does not support quoted strings in G-code. When it encounters M971 S"plate_change", it sends a packet with an empty payload, effectively ignoring the command.

Parameter Robustness: The command accepts multiple, arbitrary G-code parameters (like O and P) and includes them in the transmitted string.

G-code and Captured Packet Correlation
The following table shows a direct comparison between the G-code sent and the decoded ASCII payload of the resulting bus packet. All packets were sent from the MC (0x03) to the Unknown Address (0x10).

G-code Command Sent

Decoded ASCII Payload in Packet

Analysis

M971 S1 C1

M971 S1 C1

Success. The entire command string is passed through.

M971 S255 C255

M971 S255 C255

Success. Larger integer values are handled correctly as part of the string.

M971 S0 C0

M971 S0 C0

Success. Zero values are handled correctly.

M971 S"plate_change"

(No packet sent)

Failure. The firmware parser rejects the quoted string and does not generate a packet.

M971 S"DONE"

(No packet sent)

Failure. Confirms that quoted strings are not supported for this command.

M971 S1 C1 O123

M971 S1 C1 O123

Success. Additional, non-standard parameters are included in the string.

M971 S1 C1 P456

M971 S1 C1 P456

Success. The P parameter is also passed through.

M971 S1 C1 O123 P456

M971 S1 C1 O123 P456

Success. Multiple additional parameters are correctly included.

Conclusion for Custom Device Communication
This is excellent news for your auto plate changer project. It means you have a flexible and robust way to send commands to a custom device listening on address 0x10.

Command Protocol: You can design your own simple command language using the S, C, P, etc., parameters. For example:

M971 S1 could mean "Eject Plate".

M971 S2 could mean "Load Next Plate".

M971 P1 could mean "Report Status of Plate 1".

Implementation: Your custom device's firmware will need to listen for packets addressed to 0x10, read the ASCII payload, and parse the string to decide which action to take. Since the printer doesn't wait for an acknowledgment, this is a one-way "fire-and-forget" command system, which is perfect for this application.